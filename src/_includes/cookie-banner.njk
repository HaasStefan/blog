<div id="cookie-banner"></div>

<script>
  const cookie = getCookie("_ga");

  if (!cookie) {
    const cookieBanner = document.getElementById("cookie-banner");
    cookieBanner.innerHTML = `
    <div class="fixed bottom-0 z-50 w-full p-4">
    <div
      class="flex flex-row gap-4 items-center p-4 shadow-2xl rounded-xl bg-gray-700 text-white"
    >
      <i class="fa-solid fa-cookie-bite text-4xl"></i>
      <div class="flex-grow flex flex-col">
        <p>
          We are using cookies to get analytics on the readers engagement. Do you
          accept that we use cookies to analyze your reading habits on this blog?
        </p>
        <div class="flex gap-4 pt-2">
          <button
            onclick="deny()"
            type="button"
            class="p-1 px-2 hover:shadow-2xl font-medium rounded-lg hover:bg-gray-600"
          >
            Deny
          </button>
          <button
            onclick="accept()"
            type="button"
            class="bg-gradient-to-br shadow-xl hover:shadow-2xl from-pink-500 to-orange-400 hover:bg-gradient-to-bl focus:ring-4 focus:outline-none focus:ring-pink-200 font-medium rounded-lg p-1 px-2 text-center"
          >
            Accept
          </button>
        </div>
      </div>
    </div>
  </div>
    `;
  }

  function getCookie(name) {
    var pair = document.cookie
      .split("; ")
      .find((x) => x.startsWith(name + "="));
    if (pair) return pair.split("=")[1];
  }

  function deny() {
    const cookieBanner = document.getElementById("cookie-banner");
    setTimeout(() => {
      cookieBanner.innerHTML = "";
    }, 300);
  }

  function accept() {
    const cookieBanner = document.getElementById("cookie-banner");

    window.dataLayer = window.dataLayer || [];
    function gtag() {
      dataLayer.push(arguments);
    }
    gtag("js", new Date());

    gtag("config", "G-DJVCQCD4HN");

    setTimeout(() => {
      cookieBanner.innerHTML = "";
    }, 300);
  }
</script>
